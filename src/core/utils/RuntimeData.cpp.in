//  Copyright (c) 2021, SBEL GPU Development Team
//  Copyright (c) 2021, University of Wisconsin - Madison
//
//  SPDX-License-Identifier: BSD-3-Clause

#include <core/utils/RuntimeData.h>

#define DEME_RUNTIME_DATA_DIRECTORY "@DEME_RUNTIME_DATA_DIRECTORY@"
#define DEME_RUNTIME_INCLUDE_DIRECTORY "@DEME_RUNTIME_INCLUDE_DIRECTORY@"

// It's called data_path, but it includes both data files and kernel files
std::filesystem::path DEMERuntimeDataHelper::data_path = std::filesystem::path(DEME_RUNTIME_DATA_DIRECTORY);

// This include path is for the included headers in the kernels that need jitification
std::filesystem::path DEMERuntimeDataHelper::include_path = std::filesystem::path(DEME_RUNTIME_INCLUDE_DIRECTORY);

// p should be something like /path/to/pip/prefix/bin/../lib/python${PY_VER}/site-packages
// can get path from python's sys.executable, then run os.path.dirname on it to strip away the binary name

void DEMERuntimeDataHelper::SetPathPrefix(const std::filesystem::path& p) {
    data_path = p / "share/DEME";
    include_path = p / "include";
}
